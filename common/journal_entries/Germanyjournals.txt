
je_kulturkampf = {
	icon = "gfx/interface/icons/event_icons/kulturkampf.dds"
	
	group = je_group_historical_content
	
	modifiers_while_active = {
		modifier_kulturkampf
	}

	is_shown_when_inactive = {
		OR = {
			c:PRU ?= THIS
			c:GER ?= THIS
			c:NGF ?= THIS
		}
	}
	
	possible = {
		c:GER ?= THIS
		OR = {
			c:GER ?= {
				was_formed_from = PRU
			}
			c:GER ?= {
				was_formed_from = NGF
			}
		}
	}
	
	scripted_progress_bar = kulturkampf_core_progress_bar
	
	scripted_button = kulturkampf_secularization_button
	
	scripted_button = kulturkampf_oppress_poles_button

	immediate = {
		custom_tooltip = {
			text = kulturkampf_loc_fix_2
			ig:ig_devout = {
				set_interest_group_name = ig_catholic_church
			}
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_kulturkampf_complete
			scope:journal_entry = {
                "scripted_bar_progress(kulturkampf_core_progress_bar)" >= 200
            }
		}
	}
	
	on_complete = {
		if = {
			limit = {
 				any_interest_group = {
					has_modifier = modifier_kulturkampf_chauvinist
				}
			}
			every_interest_group = {
				limit = {
					has_modifier = modifier_kulturkampf_chauvinist
				}
				remove_modifier = modifier_kulturkampf_chauvinist
			}
		}
		custom_tooltip = {
			text = kulturkampf_loc_fix
			ig:ig_devout = { 
				set_interest_group_name = ig_evangelical_church
			}
		}
		if = {
			limit = {
				NOT = { has_law = law_type:law_total_separation }
			}
			activate_law = law_type:law_total_separation
		}
		every_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_WEST_PRUSSIA
					state_region = s:STATE_EAST_PRUSSIA
					state_region = s:STATE_POSEN
				}
			}
			add_modifier = {
				name = eastern_settlement
				years = 20
			}
		}
	}
	
	fail = {
		custom_tooltip = {
			text = je_kulturkampf_fail
			scope:journal_entry = {
                "scripted_bar_progress(kulturkampf_core_progress_bar)" <= 0
            }
		}
	}
	
	on_fail = {
		if = {
			limit = {
 				any_interest_group = {
					has_modifier = modifier_kulturkampf_chauvinist
				}
			}
			every_interest_group = {
				limit = {
					has_modifier = modifier_kulturkampf_chauvinist
				}
				remove_modifier = modifier_kulturkampf_chauvinist
			}
		}
		custom_tooltip = {
			text = kulturkampf_loc_fix
			ig:ig_devout = { 
				set_interest_group_name = ig_evangelical_church
			}
		}
		ig:ig_devout = {
			add_ideology = ideology_christian_democrat
			remove_ideology = ideology_moralist
		}
	}
	
	weight = 10000
	should_be_pinned_by_default = yes
	can_revolution_inherit = yes
}
je_constitutional_crisis = {
	icon = "gfx/interface/icons/event_icons/pickelhaube.dds"
	
	group = je_group_historical_content
	
	scripted_progress_bar = roonsreform_core_progress_bar
	
	scripted_button = roonsreform_gap_theory_button
	
	modifiers_while_active = {
		constitutional_crisis
	}
	
	is_shown_when_inactive = {
		OR = {
			c:PRU ?= THIS
			AND = {
				c:GER ?= THIS
				c:GER ?= {
					was_formed_from = PRU
				}
			}
			AND = {
				c:GER ?= THIS
				c:GER ?= {
					was_formed_from = NGF
				}
			}
		}
	}

	possible = {
		OR = {
			c:PRU ?= THIS
			AND = {
				c:GER ?= THIS
				c:GER ?= {
					was_formed_from = PRU
				}
			}
		}
		OR = {
            institution_investment_level = { institution = institution_military value >= 3 }
			is_enacting_law = law_type:law_mass_conscription
		}
	}
	
	complete = {
		has_law = law_type:law_mass_conscription
	}
	
	fail = {
		custom_tooltip = {
			text = pru_constitutional_crisis_fail
			scope:journal_entry = {
				"scripted_bar_progress(roonsreform_core_progress_bar)" >= 60
			}
		}
		ig:ig_armed_forces = { is_in_government = no }
	}

	
	on_complete = {
		if = {
			limit = {
				has_modifier = modifier_roonsreform_gap_theory
			}
			remove_modifier = modifier_roonsreform_gap_theory
			add_modifier = {
			name = roonref
			years = 3
			is_decaying = no
		}
		ig:ig_petty_bourgeoisie = {
			set_ig_trait = ig_trait:ig_trait_culture_of_militarism
		}
	}
	
	on_fail = {
		if = {
			limit = {
				has_modifier = modifier_roonsreform_gap_theory
			}
			remove_modifier = modifier_roonsreform_gap_theory
		}
		if = {
			limit = {
				NOT = {
					any_political_movement = {
						OR = {
							is_political_movement_type = movement_liberal
							is_political_movement_type = movement_modernizer
							is_political_movement_type = movement_radical
						}
					}
				}
			}
			create_political_movement = { type = movement_radical }
			custom_tooltip = {
				text = pru_constitutional_crisis_modifier_add
			}
		}
		random_political_movement = {
			limit = { 
				OR = {
					is_political_movement_type = movement_liberal
					is_political_movement_type = movement_modernizer
					is_political_movement_type = movement_radical
				}
			}
			add_modifier = {
				name = modifier_ger_democrat_surge
				years = 15
				is_decaying = yes
			}
		}
	}

	can_revolution_inherit = yes

	weight = 5000
	should_be_pinned_by_default = yes
}