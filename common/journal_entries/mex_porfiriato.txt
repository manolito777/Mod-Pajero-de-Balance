je_porfiriato_buff = {
	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"
	
	group = je_group_porfiriato

	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
        is_player = yes
		has_variable = porfirio_presidente
		NOT = { has_variable = porfiriato_buff }
	}

	possible = {
		this = c:MEX
		c:MEX = ROOT
		has_variable = porfirio_presidente
		government_legitimacy >= 50
	}

	immediate = {
        set_variable = {
			name = porfiriato_var
			value = 0
		}
		every_scope_character = {
            limit = {
				OR = {
					has_template = mex_porfirio_diaz_industrial_template
					has_template = mex_porfirio_diaz_militar_template
				}
            }
            save_scope_as = porfirio
        }
    }

	is_progressing = {
		porfirato_completion_trigger = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					porfirato_completion_trigger = yes
				}
				change_variable = {
					name = porfiriato_var
					add = 1
				}
			}
		}
	}

	complete = {
		# If-else clause to avoid errors because of missing variable before JE activates
		trigger_if = {
			limit = { exists = var:porfiriato_var }
			scope:journal_entry = { is_goal_complete = yes }
			porfirato_completion_trigger = yes
		}
		trigger_else = {
			custom_tooltip = je_porfiriato_buff_goal
			scope:journal_entry = { is_goal_complete = yes }
			porfirato_completion_trigger = yes
		}
	}

	on_complete = {
		trigger_event = {
			id = inicio_porfiriato.6
		}
		set_variable = porfiriato_buff
	}

	fail = {
		scope:porfirio = { NOT = { is_ruler = yes } }
	}

	on_fail = {
		trigger_event = inicio_porfiriato.7
	}

	current_value = {
		value = root.var:porfiriato_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000
}