namespace = monarquia_mexicana

# Monarquia por decision
monarquia_mexicana.1 = {
	type = country_event

	title = monarquia_mexicana.1.t
	desc = monarquia_mexicana.1.d
	flavor = monarquia_mexicana.1.f

	event_image = {
		texture = "gfx/event_pictures/monarca_desc.dds"
	}

	icon = "gfx/interface/icons/event_icons/monarquia_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		c:MEX ?= this
		NOT = { has_variable = monarquia_decision }
		NOT = { has_variable = mexi_monar }
		has_law = law_type:law_monarchy
	}

	immediate = { 
		set_variable = monarquia_decision
		ig:ig_intelligentsia = {
			remove_modifier = benito_ig_buff
		}
	}

	option = { 
		name = monarquia_mexicana.1.a
		custom_tooltip = emperador_lider_tt
		add_modifier = {
			name = nuevo_linaje
			days = normal_modifier_time
		}
	}

	option = { 
		name = monarquia_mexicana.1.b
		custom_tooltip = emperador_Iturbide_tt
		default_option = yes
		create_character = {
			template = mex_agustinjeronimo_template
		}
		add_modifier = {
			name = monarca_legitimo
		}
	}
}

# Deuda Europea
monarquia_mexicana.2 = {
	type = country_event

	title = monarquia_mexicana.2.t
	desc = monarquia_mexicana.2.d
	flavor = monarquia_mexicana.2.f

	event_image = {
		texture = "gfx/event_pictures/deuda_europea.dds"
	}

	icon = "gfx/interface/icons/event_icons/monarquia_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		c:MEX ?= this
        NOT = { has_variable = deuda_extranjera }
		game_date > 1836.1.1
	}

	immediate = { 
		set_variable = deuda_extranjera
	}

	option = { 
		name = monarquia_mexicana.2.a
		custom_tooltip = pedir_prestamos_tt
		default_option = yes
		set_variable = deuda_aceptada
		add_modifier = {
			name = prestamo_extranjero
		}
	}

	option = { 
		name = monarquia_mexicana.2.b
		custom_tooltip = no_pedir_prestamos_tt
	}
}

# Pago de la deuda
monarquia_mexicana.3 = {
	type = country_event

	title = monarquia_mexicana.3.t
	desc = monarquia_mexicana.3.d
	flavor = monarquia_mexicana.3.f

	event_image = {
		texture = "gfx/event_pictures/maxi_emp.dds"
	}

	icon = "gfx/interface/icons/event_icons/monarquia_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { }

	immediate = { }

	option = { 
		name = monarquia_mexicana.3.a
		custom_tooltip = pagar_deuda_tt
		add_treasury = -7000000
	}

	option = { 
		name = monarquia_mexicana.3.b
		custom_tooltip = acuerdo_monarquia_tt
		default_option = yes
		set_variable = mexi_monar
		create_character = {
			template = mex_maxiemiliano_template
		}
		add_modifier = {
			name = nuevo_linaje
			days = normal_modifier_time
		}
		ig:ig_intelligentsia = {
			remove_modifier = benito_ig_buff
		}
		activate_law = law_type:law_monarchy
		activate_law = law_type:law_autocracy
	}
}

# elecciond de sucesor
monarquia_mexicana.4 = {
	type = country_event

	title = monarquia_mexicana.4.t
	desc = monarquia_mexicana.4.d
	flavor = monarquia_mexicana.4.f

	event_image = {
		texture = "gfx/event_pictures/maxi_sucesor.dds"
	}

	icon = "gfx/interface/icons/event_icons/monarquia_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		has_variable = mexi_monar
		NOT = { has_variable = sucesor_elejido }
	}

	immediate = { 
		set_variable = sucesor_elejido
	}

	option = { 
		name = monarquia_mexicana.4.a
		custom_tooltip = heredero_austriaco_tt
		create_character = {
			template = mex_karlludwig_template
		}
		add_modifier = {
			name = heredero_aus
			days = normal_modifier_time
		}
	}

	option = { 
		name = monarquia_mexicana.4.b
		custom_tooltip = heredero_mexicano_tt
		default_option = yes
		create_character = {
			template = mex_agustinjeronimo_heir_template
		}
		add_modifier = {
			name = heredero_mex
			days = normal_modifier_time
		}
	}
}

# fin de la monarquia
monarquia_mexicana.5 = {
	type = country_event

	title = monarquia_mexicana.5.t
	desc = monarquia_mexicana.5.d
	flavor = monarquia_mexicana.5.f

	event_image = {
		texture = "gfx/event_pictures/fin_mon.dds"
	}

	icon = "gfx/interface/icons/event_icons/monarquia_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		OR = {
			has_variable = monarquia_decision
			has_variable = mexi_monar
		}
		NOT = { has_variable = fin_monarquia }
		NOT = {has_law = law_type:law_monarchy}
	}

	immediate = { 
		set_variable = fin_monarquia
	}

	option = { 
		name = monarquia_mexicana.5.a
		custom_tooltip = fin_mon_tt
		if = {
			limit = { has_modifier = monarca_legitimo }
			remove_modifier = monarca_legitimo
		}
	}
}