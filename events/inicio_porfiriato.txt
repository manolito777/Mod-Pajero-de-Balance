namespace = inicio_porfiriato

# Plan de la Noria
inicio_porfiriato.1 = {
	type = country_event

	title = inicio_porfiriato.1.t
	desc = inicio_porfiriato.1.d
	flavor = inicio_porfiriato.1.f

	event_image = {
		texture = "gfx/event_pictures/plan_noria.dds"
	}

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = {
		game_date < 1871.11.07
		game_date > 1861.12.08
		any_scope_character = {
            OR = {
                	has_template = mex_porfirio_diaz_militar_template
					has_template = mex_porfirio_diaz_industrial_template
				}
        }
		NOT = { has_variable = plan_noria }
		has_variable = porfirio_general
	}

	immediate = {
		set_variable = plan_noria
        every_scope_character = {
            limit = {
                OR = {
                	has_template = mex_porfirio_diaz_militar_template
					has_template = mex_porfirio_diaz_industrial_template
				}
            }
            save_scope_as = porfirio
        }
    }

	option = { # Porfirio toma el poder
		name = inicio_porfiriato.1.a
		set_variable = inicio_porfiriato_triggered
		custom_tooltip = inicio_porfiriato_takeover_tt
		scope:porfirio = {
			set_character_as_ruler = yes
		}
		add_modifier = {
			name = toma_de_poder
			days = long_modifier_time
			is_decaying = yes
		}
		ig:ig_intelligentsia = {
    		remove_modifier = benito_ig_buff 
    	}
		activate_law = law_type:law_oligarchy
		activate_law = law_type:law_presidential_republic
		add_radicals = {
			value = 0.15
		}
	}

	option = { # Díaz es detenido (histórico)
		name = inicio_porfiriato.1.b
		default_option = yes
		set_variable = inicio_porfiriato_fail
		custom_tooltip = inicio_porfiriato_failure_tt
		add_radicals = {
			value = large_radicals
			culture = cu:mexican
			pop_type = officers
		}
		add_radicals = {
			value = large_radicals
			culture = cu:mexican
			pop_type = soldiers
		}
		add_modifier = {
			name = paro_golpe_estado
			days = normal_modifier_time
		}
	}
}

# Porfirio general
inicio_porfiriato.2 = {
	type = country_event

	title = inicio_porfiriato.2.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = inicio_porfiriato.2.d
				trigger = {
					is_at_war = yes
				}
			}
			triggered_desc = {
				desc = inicio_porfiriato.2.d2
				trigger = {
					is_at_war = no
				}
			}
		}
	}
	
	flavor = inicio_porfiriato.2.f

	event_image = {
		texture = "gfx/event_pictures/porfirio_general_final.dds"
	}

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = {
		c:MEX ?= this
		NOT = { has_variable = porfirio_general }
		OR = {
			AND = {
				game_date > 1857.12.17
				game_date < 1861.9.15
			}
			AND = {
				game_date > 1848.1.11
				is_at_war = yes
			}
		}
	}

	immediate = {
		set_variable = porfirio_general
	}
	option = { # Díaz se convierte en general (fuerzas armadas)
		name = inicio_porfiriato.2.a
		custom_tooltip = porfirio_general_fa_tt
		create_character = {
			template = mex_porfirio_diaz_militar_template
		}
		set_variable = porfirio_ig_militar
	}
	option = { # Díaz se convierte en general (industrialista)
		name = inicio_porfiriato.2.b
		default_option = yes
		custom_tooltip = porfirio_general_industrial_tt
		create_character = {
			template = mex_porfirio_diaz_industrial_template
		}
		set_variable = porfirio_ig_industrial
	}
}

# Plan de la Tuxtepec
inicio_porfiriato.3 = {
	type = country_event

	title = inicio_porfiriato.3.t
	desc = inicio_porfiriato.3.d
	flavor = inicio_porfiriato.3.f

	event_image = {
		texture = "gfx/event_pictures/plan_tuxtepec.dds"
	}

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = {
		game_date > 1876.10.01
		game_date < 1877.10.01
		any_scope_character = {
            OR = {
                	has_template = mex_porfirio_diaz_militar_template
					has_template = mex_porfirio_diaz_industrial_template
				}
        }
		NOT = { has_variable = plan_tuxtepec }
		NOT = { has_variable = inicio_porfiriato_final_fail }
		has_variable = inicio_porfiriato_fail
	}

	immediate = {
		set_variable = plan_tuxtepec
        every_scope_character = {
            limit = {
				OR = {
                	has_template = mex_porfirio_diaz_militar_template
					has_template = mex_porfirio_diaz_industrial_template
				}
            }
            save_scope_as = porfirio
        }
    }

	option = { # Porfirio toma el poder (histórico)
		name = inicio_porfiriato.1.a
		default_option = yes
		set_variable = inicio_porfiriato_triggered
		custom_tooltip = inicio_porfiriato_takeover_tt
		scope:porfirio = {
			set_character_as_ruler = yes
		}
		add_modifier = {
			name = toma_de_poder
			days = long_modifier_time
			is_decaying = yes
		}
		ig:ig_intelligentsia = {
    		remove_modifier = benito_ig_buff 
    	}
		activate_law = law_type:law_oligarchy
		activate_law = law_type:law_presidential_republic
		add_radicals = {value = 0.15}
	}

	option = { # Díaz es ejecutado
		name = inicio_porfiriato.3.b
		set_variable = inicio_porfiriato_final_fail
		custom_tooltip = inicio_porfiriato_final_failure_tt
		add_radicals = {
			value = large_radicals
			culture = cu:mexican
		}
		add_modifier = {
			name = paro_golpe_estado
			days = normal_modifier_time
		}
		scope:porfirio = {
			kill_character = yes
		}
	}
}

# Porfirio presidente militar
inicio_porfiriato.4 = {
	type = country_event

	title = inicio_porfiriato.4.t
	desc = inicio_porfiriato.4.d
	flavor = inicio_porfiriato.4.f

	event_image = {
		texture = "gfx/event_pictures/porfirio_general_final.dds"
	}

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = {
		NOT = { has_variable = porfirio_presidente }
		has_variable = inicio_porfiriato_triggered
		has_variable = porfirio_ig_militar
	}

	immediate = {
		set_variable = porfirio_presidente
        every_scope_character = {
            limit = {
                has_template = mex_porfirio_diaz_militar_template
            }
            save_scope_as = porfirio
        }
    }

	option = { # Porfirio se queda con la militar
		name = inicio_porfiriato.4.a
		custom_tooltip = porfiriato_militar_tt
		scope:porfirio = {
			set_as_interest_group_leader = yes
		}
		ig:ig_armed_forces = {
    		add_modifier = {
        		name = porfiriato_ig
    		}
			add_ruling_interest_group = yes
		}
		#activate_law = law_wealth_voting
	}
}

# Porfirio presidente industrial
inicio_porfiriato.5 = {
	type = country_event

	title = inicio_porfiriato.5.t
	desc = inicio_porfiriato.5.d
	flavor = inicio_porfiriato.5.f

	event_image = {
		texture = "gfx/event_pictures/porfirio_general_final.dds"
	}

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = {
		NOT = { has_variable = porfirio_presidente }
		has_variable = inicio_porfiriato_triggered
		has_variable = porfirio_ig_industrial
	}

	immediate = {
		set_variable = porfirio_presidente
        every_scope_character = {
            limit = {
                has_template = mex_porfirio_diaz_industrial_template
            }
            save_scope_as = porfirio
        }
    }

	option = { # Porfirio se convierte en industrialista
		name = inicio_porfiriato.5.a
		default_option = yes
		custom_tooltip = porfiriato_industrial_tt
		scope:porfirio = {
			set_as_interest_group_leader = yes
		}
		ig:ig_industrialists = {
    		add_modifier = {
        		name = porfiriato_ig
    		}
			add_ruling_interest_group = yes
		}
	}
}

# Consolidación del Porfiriato 
inicio_porfiriato.6 = {
	type = country_event

	title = inicio_porfiriato.6.t
	desc = inicio_porfiriato.6.d
	flavor = inicio_porfiriato.6.f

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	event_image = {
		texture = "gfx/event_pictures/porfirio_consolidado.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		NOT = { has_variable = porfirio_presidente_consolidado }
		}

	immediate = {
		set_variable = porfirio_presidente_consolidado
	}

	option = {
		name = inicio_porfiriato.6.a
		default_option = yes
		custom_tooltip = porfiriato_consolidado_tt
		if = {
			limit = { has_variable = porfirio_ig_militar }
			add_modifier = { name = porfiriato_militar }
		}
		if = {
			limit = { has_variable = porfirio_ig_industrial }
			add_modifier = { name = porfiriato_industrial }
		}
	}
}

# Falla la consolidación del Porfiriato 
inicio_porfiriato.7 = {
	type = country_event

	title = inicio_porfiriato.7.t
	desc = inicio_porfiriato.7.d
	flavor = inicio_porfiriato.7.f

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	event_image = {
		texture = "gfx/event_pictures/porfirio_fallo_consolidacion.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		NOT = { has_variable = porfirio_no_consolidado }
		}

	immediate = {
		set_variable = porfirio_no_consolidado
	}

	option = {
		name = inicio_porfiriato.7.a
		default_option = yes
		custom_tooltip = porfiriato_no_consolidado_tt
		if = {
			limit = { has_variable = porfirio_ig_militar }
			ig:ig_armed_forces = {
    			remove_modifier = porfiriato_ig
			}
		}
		if = {
			limit = { has_variable = porfirio_ig_industrial }
			ig:ig_industrialists = {
    			remove_modifier = porfiriato_ig
			}
		}
	}
}

# Muerte de Porfirio
inicio_porfiriato.8 = {
	type = country_event

	title = inicio_porfiriato.8.t
	desc = inicio_porfiriato.8.d
	flavor = inicio_porfiriato.8.f

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"
	
	event_image = {
		texture = "gfx/event_pictures/porfirio_muerto.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = { 
		has_variable = porfirio_presidente_consolidado
	}

	immediate = {}

	option = {
		name = inicio_porfiriato.8.a
		default_option = yes
		custom_tooltip = porfiriato_muerto_tt
		set_variable = porfirio_muerto_en_poder
		if = {
			limit = { has_variable = porfirio_ig_militar }
			remove_modifier = porfiriato_militar 
			add_modifier = { name = legado_porfiriato_militar  }
			add_modifier = { 
				name = muerte_porfirio 
				days = normal_modifier_time
			}
			ig:ig_armed_forces = {
    			remove_modifier = porfiriato_ig
			}
		}
		if = {
			limit = { has_variable = porfirio_ig_industrial }
			remove_modifier = porfiriato_industrial
			add_modifier = { name = legado_porfiriato_industrial }
			add_modifier = { 
				name = muerte_porfirio  
				days = normal_modifier_time
			}
			ig:ig_industrialists = {
    			remove_modifier = porfiriato_ig
			}
		}
	}
}

# Exilio de Diaz
inicio_porfiriato.9 = {
	type = country_event

	title = inicio_porfiriato.9.t
	desc = inicio_porfiriato.9.d
	flavor = inicio_porfiriato.9.f

	event_image = {
		texture = "gfx/event_pictures/porfirio_fallo_consolidacion.dds"
	}

	icon = "gfx/interface/icons/event_icons/diaz_evento.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 3

	trigger = {
		NOT = { has_variable = exilio }
		NOT = { has_variable = porfirio_muerto_en_poder }
		has_variable = porfirio_presidente_consolidado
		ruler = {
  			NOR = {
         		has_template = mex_porfirio_diaz_militar_template
         		has_template = mex_porfirio_diaz_industrial_template
    		}
		}
	}

	immediate = {
		set_variable = exilio
        every_character = {
            limit = {
				OR = {
                	has_template = mex_porfirio_diaz_militar_template
					has_template = mex_porfirio_diaz_industrial_template
				}
            }
            save_scope_as = porfirio
        }
    }

	option = { 
		name = inicio_porfiriato.9.a
		custom_tooltip = porfirio_exilio_tt
		scope:porfirio = {
			exile_character = yes
		}
		if = {
			limit = { has_variable = porfirio_ig_militar }
			remove_modifier = porfiriato_militar 
			add_modifier = { name = legado_porfiriato_militar  }
			add_modifier = { 
				name = exilio_porfirio 
				days = normal_modifier_time
			}
			ig:ig_armed_forces = {
    			remove_modifier = porfiriato_ig
			}
		}
		if = {
			limit = { has_variable = porfirio_ig_industrial }
			remove_modifier = porfiriato_industrial
			add_modifier = { name = legado_porfiriato_industrial }
			add_modifier = { 
				name = exilio_porfirio  
				days = normal_modifier_time
			}
			ig:ig_industrialists = {
    			remove_modifier = porfiriato_ig
			}
		}
	}
}